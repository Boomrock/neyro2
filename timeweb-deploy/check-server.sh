#!/bin/bash

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ Neuro Event..."
echo "==========================================="

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ 8000
echo "1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞ 8000:"
netstat -tlnp | grep :8000 || echo "‚ùå –ü–æ—Ä—Ç 8000 –Ω–µ —Å–ª—É—à–∞–µ—Ç"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ uvicorn
echo "2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ uvicorn:"
ps aux | grep uvicorn | grep -v grep || echo "‚ùå uvicorn –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx
echo "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx:"
systemctl is-active nginx && echo "‚úÖ nginx —Ä–∞–±–æ—Ç–∞–µ—Ç" || echo "‚ùå nginx –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
echo "4. –ü—Ä–æ–≤–µ—Ä–∫–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:"
curl -s http://localhost:8000/docs > /dev/null && echo "‚úÖ FastAPI docs –¥–æ—Å—Ç—É–ø–Ω—ã" || echo "‚ùå FastAPI docs –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"

curl -s -X OPTIONS http://localhost:8000/generate_dalle > /dev/null && echo "‚úÖ /generate_dalle OPTIONS —Ä–∞–±–æ—Ç–∞–µ—Ç" || echo "‚ùå /generate_dalle OPTIONS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
echo "5. –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:"
nginx -t && echo "‚úÖ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞" || echo "‚ùå nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏"

echo "==========================================="
echo "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"